{"ast":null,"code":"var _jsxFileName = \"/Users/niles/Desktop/Github/cmaj/firstProj/gui/src/View.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport \"./index.css\";\nimport Three from \"./3D/ThreeJS\";\nimport UI from \"./components/ui\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst oscCount = 6;\nexport default function View({\n  patchConnection\n}) {\n  _s();\n  const [stateLoaded, setStateLoaded] = useState(false);\n  const [fftData, setFFTData] = useState([]);\n  const [amps, setAmps] = useState(Array(oscCount).fill(0.0));\n  const [frqs, setFrqs] = useState(Array(oscCount).fill(0.0));\n  const [cons, setCons] = useState(Array(oscCount).fill(0));\n  const updateValues = (type, index, value) => {\n    if (type === \"amp\") {\n      setAmps(prev => prev.map((amp, i) => i === index ? value : amp));\n    } else if (type === \"frq\") {\n      setFrqs(prev => prev.map((frq, i) => i === index ? value : frq));\n    } else if (type === \"con\") {\n      // setCons((prev) => prev.map((con, i) => (i === index ? value : con)));\n    }\n  };\n  const handleSliderChange = (type, index, value) => {\n    updateValues(type, index, value);\n    patchConnection === null || patchConnection === void 0 ? void 0 : patchConnection.sendEventOrValue(`${type}Band${index}`, value, 100);\n  };\n  const handleControlChange = (type, index, value) => {\n    // setAmps((prev) => prev.map((amp, i) => (i === index ? value : amp)));\n    updateValues(type, index, value);\n    patchConnection === null || patchConnection === void 0 ? void 0 : patchConnection.sendEventOrValue(`osc${index}_${type}`, value);\n    console.log(type, index, value);\n  };\n  const handleDftOut = event => {\n    setFFTData(event.magnitudes);\n  };\n  useEffect(() => {\n    const requestParameterValues = type => {\n      for (let i = 0; i < oscCount; i++) {\n        patchConnection === null || patchConnection === void 0 ? void 0 : patchConnection.requestParameterValue(`osc${i}_${type}`);\n      }\n    };\n    const handleControlChange = event => {\n      const id = event.endpointID;\n      const val = event.value;\n      const index = parseInt(id.slice(3, 4));\n      const type = id.slice(5, 8);\n\n      // updateValues(\"amp\", 1, 0.5);\n      updateValues(type, index, val);\n    };\n\n    // Add listeners for DFT output and input controls\n    patchConnection === null || patchConnection === void 0 ? void 0 : patchConnection.addEndpointListener(\"dftOut\", handleDftOut);\n    patchConnection === null || patchConnection === void 0 ? void 0 : patchConnection.addAllParameterListener(handleControlChange);\n\n    // Load initial state\n    if (!stateLoaded) {\n      requestParameterValues(\"amp\");\n      requestParameterValues(\"frq\");\n      requestParameterValues(\"con\");\n      setStateLoaded(true);\n    }\n    return () => {\n      patchConnection === null || patchConnection === void 0 ? void 0 : patchConnection.removeEndpointListener(\"dftOut\", handleDftOut);\n      patchConnection === null || patchConnection === void 0 ? void 0 : patchConnection.removeAllParameterListener(handleControlChange);\n    };\n  }, [patchConnection, stateLoaded]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"containerWrapper\",\n    children: /*#__PURE__*/_jsxDEV(UI, {\n      amps: amps,\n      frqs: frqs,\n      cons: cons,\n      handleControlChange: handleControlChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(View, \"BNc6MZe39o2O2rTUu0uTUWEtG1M=\");\n_c = View;\nvar _c;\n$RefreshReg$(_c, \"View\");","map":{"version":3,"names":["useEffect","useState","useRef","Three","UI","jsxDEV","_jsxDEV","oscCount","View","patchConnection","_s","stateLoaded","setStateLoaded","fftData","setFFTData","amps","setAmps","Array","fill","frqs","setFrqs","cons","setCons","updateValues","type","index","value","prev","map","amp","i","frq","handleSliderChange","sendEventOrValue","handleControlChange","console","log","handleDftOut","event","magnitudes","requestParameterValues","requestParameterValue","id","endpointID","val","parseInt","slice","addEndpointListener","addAllParameterListener","removeEndpointListener","removeAllParameterListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/niles/Desktop/Github/cmaj/firstProj/gui/src/View.jsx"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport \"./index.css\";\nimport Three from \"./3D/ThreeJS\";\nimport UI from \"./components/ui\";\n\nconst oscCount = 6;\n\nexport default function View({ patchConnection }) {\n  const [stateLoaded, setStateLoaded] = useState(false);\n  const [fftData, setFFTData] = useState([]);\n  const [amps, setAmps] = useState(Array(oscCount).fill(0.0));\n  const [frqs, setFrqs] = useState(Array(oscCount).fill(0.0));\n  const [cons, setCons] = useState(Array(oscCount).fill(0));\n\n  const updateValues = (type, index, value) => {\n    if (type === \"amp\") {\n      setAmps((prev) => prev.map((amp, i) => (i === index ? value : amp)));\n    } else if (type === \"frq\") {\n      setFrqs((prev) => prev.map((frq, i) => (i === index ? value : frq)));\n    } else if (type === \"con\") {\n      // setCons((prev) => prev.map((con, i) => (i === index ? value : con)));\n    }\n  };\n\n  const handleSliderChange = (type, index, value) => {\n    updateValues(type, index, value);\n    patchConnection?.sendEventOrValue(`${type}Band${index}`, value, 100);\n  };\n\n  const handleControlChange = (type, index, value) => {\n    // setAmps((prev) => prev.map((amp, i) => (i === index ? value : amp)));\n    updateValues(type, index, value);\n    patchConnection?.sendEventOrValue(`osc${index}_${type}`, value);\n    console.log(type, index, value);\n  };\n\n  const handleDftOut = (event) => {\n    setFFTData(event.magnitudes);\n  };\n\n  useEffect(() => {\n    const requestParameterValues = (type) => {\n      for (let i = 0; i < oscCount; i++) {\n        patchConnection?.requestParameterValue(`osc${i}_${type}`);\n      }\n    };\n\n    const handleControlChange = (event) => {\n      const id = event.endpointID;\n      const val = event.value;\n      const index = parseInt(id.slice(3, 4));\n      const type = id.slice(5, 8);\n\n      // updateValues(\"amp\", 1, 0.5);\n      updateValues(type, index, val);\n    };\n\n    // Add listeners for DFT output and input controls\n    patchConnection?.addEndpointListener(\"dftOut\", handleDftOut);\n    patchConnection?.addAllParameterListener(handleControlChange);\n\n    // Load initial state\n    if (!stateLoaded) {\n      requestParameterValues(\"amp\");\n      requestParameterValues(\"frq\");\n      requestParameterValues(\"con\");\n\n      setStateLoaded(true);\n    }\n\n    return () => {\n      patchConnection?.removeEndpointListener(\"dftOut\", handleDftOut);\n      patchConnection?.removeAllParameterListener(handleControlChange);\n    };\n  }, [patchConnection, stateLoaded]);\n\n  return (\n    <div className=\"containerWrapper\">\n      {/* <div className=\"canvas3DWrapper\">\n        <div className=\"canvas3D\">\n          <Three loaded={true} amps={amps} frqs={frqs} />\n        </div>\n      </div> */}\n      <UI\n        amps={amps}\n        frqs={frqs}\n        cons={cons}\n        handleControlChange={handleControlChange}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}